# MAINT-004: 问题排查

## 使用场景
系统出现问题，需要定位和解决时使用

## Prompt 模板

```markdown
## 问题排查任务

### 问题描述
[清晰描述问题现象]

### 影响范围
- [ ] 影响所有用户
- [ ] 影响特定用户: [用户类型]
- [ ] 影响特定功能: [功能名称]
- [ ] 影响特定环境: [环境]

### 环境信息
- 应用版本: [commit或版本号]
- 部署环境: [开发/测试/生产]
- 浏览器: [Chrome 120 / Edge 120]
- 操作系统: [Windows 11 / macOS 14]
- 账号: [如有特定账号]
- 时间: [问题发生时间]

### 复现步骤
1. [步骤1]
2. [步骤2]
3. [步骤3]

**复现频率:**
☐ 必现 (100%)  
☐ 高概率 (50%-99%)  
☐ 偶发 (10%-49%)  
☐ 极少 (<10%)  
☐ 仅出现一次

### 错误信息
**浏览器控制台:**
```
[按F12复制Console中的错误信息]
```

**网络请求:**
```
失败的请求URL: 
请求方法: 
状态码: 
响应内容: 
```

**服务端日志:**
```
[如有服务端错误日志]
```

### 预期行为
[正常情况下应该发生什么]

### 实际行为
[实际发生了什么]

### 已尝试的解决方案
1. [尝试1] - 结果: [成功/失败]
2. [尝试2] - 结果: [成功/失败]

### 相关代码
```typescript
[如有相关代码片段]
```

### 截图/录屏
[描述问题现象或附件]

### 紧急程度
☐ P0 - 系统不可用，立即处理  
☐ P1 - 核心功能受影响，24小时内  
☐ P2 - 一般功能问题，72小时内  
☐ P3 - 轻微问题，下次迭代

---

请按以下步骤执行：

1. **信息收集**
   - 分析提供的环境信息
   - 识别关键线索
   - 提出需要补充的信息（如有）

2. **根因分析**
   - 基于现象推断可能原因
   - 列出所有可能性
   - 逐一排除

3. **定位问题**
   - 确定问题发生的代码位置
   - 分析触发条件
   - 理解为什么会发生

4. **提供解决方案**
   - 给出修复方案
   - 评估方案影响
   - 提供临时绕过方案（如需要）

5. **实施修复**
   - 修改代码
   - 验证修复效果
   - 添加预防措施

请开始分析问题，告诉我你的排查思路和发现。
```

## 示例

```markdown
## 问题排查任务

### 问题描述
点击创建工作空间按钮后没有反应，页面卡住。

### 环境信息
- 版本: latest
- 浏览器: Chrome 120
- 系统: Windows 11
- 账号: demo@example.com

### 复现步骤
1. 登录系统
2. 点击"创建工作空间"
3. 填写名称和描述
4. 点击"创建"按钮
5. 按钮变灰，但一直没有响应

### 错误信息
控制台显示: "POST http://localhost:3000/api/workspaces 500 (Internal Server Error)"

### 紧急程度
P1 - 核心功能无法使用
```

## 输出预期

AI 应该输出：
1. 问题分析思路
2. 可能的根因列表
3. 验证每个根因的方法
4. 确定的根因
5. 修复方案
6. 预防措施建议
