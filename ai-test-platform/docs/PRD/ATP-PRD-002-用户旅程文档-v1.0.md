# AI Test Platform - 用户旅程文档

> 文档编号: ATP-PRD-002  
> 版本: v1.0  
> 最后更新: 2026-02-16  
> 维护人: AI 产品经理  
> 状态: ✅ 已完成

---

## 1. 整体架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        AI Test Platform                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐  │
│  │  用户管理 │───▶│ 工作空间 │───▶│   项目   │───▶│   系统   │  │
│  └──────────┘    └──────────┘    └──────────┘    └────┬─────┘  │
│                                                       │        │
│                       ┌───────────────────────────────┘        │
│                       ▼                                        │
│               ┌──────────────┐                                 │
│               │    页面      │                                 │
│               └──────┬───────┘                                 │
│                      │                                         │
│        ┌─────────────┼─────────────┐                          │
│        ▼             ▼             ▼                          │
│   ┌─────────┐  ┌─────────┐  ┌─────────┐                       │
│   │需求管理 │  │用例设计 │  │测试执行 │                       │
│   └────┬────┘  └────┬────┘  └────┬────┘                       │
│        │            │            │                             │
│        └────────────┴────────────┘                             │
│                       ▼                                        │
│               ┌──────────────┐                                 │
│               │  测试报告    │                                 │
│               └──────────────┘                                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 用户旅程地图

### 2.1 新用户首次使用旅程

| 阶段 | 用户行为 | 触点 | 情感曲线 | 机会点 |
|------|----------|------|----------|--------|
| **认知** | 听说产品，产生兴趣 | 官网/推荐 | 😐→🙂 | 展示核心卖点 |
| **注册** | 填写邮箱/手机号注册 | 注册页 | 🙂 | 简化流程，一键注册 |
| **引导** | 完成新手引导 | 引导页 | 😊 | 交互式教程 |
| **创建** | 创建工作空间 → 项目 → 系统 | 管理页 | 😊 | AI 助手辅助 |
| **体验** | 导入需求 → AI 生成用例 | 用例页 | 🤩 | 展示 AI 能力 |
| **执行** | 运行第一个测试 | 执行页 | 🤩→🎉 | 即时反馈 |
| **留存** | 查看报告，分享结果 | 报告页 | 🎉 | 社交分享 |

---

## 3. 核心流程详细设计

### 3.1 登录注册流程

```
┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐
│  首页    │────▶│ 选择方式 │────▶│ 填写信息 │────▶│ 验证    │
└──────────┘     └────┬─────┘     └──────────┘     └────┬─────┘
                      │                                  │
         ┌────────────┼────────────┐                   │
         ▼            ▼            ▼                   ▼
    ┌─────────┐  ┌─────────┐  ┌─────────┐        ┌──────────┐
    │ 邮箱注册 │  │ 手机注册 │  │ 直接登录 │────▶│ 进入首页 │
    └─────────┘  └─────────┘  └─────────┘        └──────────┘
```

**流程说明**：
1. 用户访问首页，点击「开始使用」
2. 系统展示三种方式：邮箱注册 / 手机注册 / 已有账号登录
3. 用户选择方式并填写信息
4. 邮箱/手机验证码验证
5. 首次登录进入引导页，老用户直接进入工作台

**异常处理**：
- 验证码错误：提示重新输入，提供重新发送按钮
- 邮箱已注册：提示直接登录
- 密码错误：提示剩余尝试次数，超过锁定账户

---

### 3.2 Demo 核心流程（首次体验黄金路径）

```
登录成功
    │
    ▼
┌─────────────────┐
│   工作台首页    │ ◀── 展示工作空间列表
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  创建工作空间   │ ◀── 输入名称即可创建
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   创建项目      │ ◀── 输入项目名称和描述
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   创建系统      │ ◀── 输入系统名称和 URL
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   需求导入      │ ◀── 上传文档或粘贴文本
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  AI 解析需求    │ ◀── 自动提取需求点（2-5秒）
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ AI 生成测试用例 │ ◀── 一键生成用例（5-10秒）
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   用例管理      │ ◀── 查看/编辑生成的用例
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   执行测试      │ ◀── 点击「执行」按钮
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  查看执行结果   │ ◀── 实时查看进度和结果
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  生成测试报告   │ ◀── 自动汇总报告
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   导出/分享     │ ◀── 导出 PDF 或分享链接
└─────────────────┘
```

**每个步骤的界面元素**：

| 步骤 | 界面元素 | 交互说明 |
|------|----------|----------|
| 创建工作空间 | 名称输入框、创建按钮 | 实时校验名称唯一性 |
| 创建项目 | 名称、描述、模板选择 | 提供示例项目模板 |
| 创建系统 | 名称、URL、环境选择 | 支持 Dev/Test/Prod 环境 |
| 需求导入 | 拖拽上传区、粘贴框 | 支持多文件批量上传 |
| AI 解析 | 进度条、解析结果预览 | 可手动编辑解析结果 |
| AI 生成用例 | 生成中动画、用例列表 | 支持批量选择/单条编辑 |
| 用例管理 | 表格/卡片视图、筛选器 | 支持拖拽排序 |
| 执行测试 | 执行配置弹窗、进度条 | 实时日志输出 |
| 查看结果 | 结果列表、截图预览 | 失败项高亮显示 |
| 测试报告 | 统计图表、详情列表 | 支持多维度筛选 |

---

### 3.3 需求管理流程

```
┌──────────────┐
│  需求入口    │
└──────┬───────┘
       │
       ├──▶ 上传文件（Word/PDF/Excel/MD）
       │
       ├──▶ 粘贴文本内容
       │
       └──▶ 对接第三方（Jira/Notion）
              │
              ▼
       ┌──────────────┐
       │  AI 预处理   │ ──▶ 提取文本、识别格式
       └──────┬───────┘
              │
              ▼
       ┌──────────────┐
       │ 需求解析引擎 │ ──▶ 识别功能点、场景、规则
       └──────┬───────┘
              │
              ▼
       ┌──────────────┐
       │  结构化展示  │ ──▶ 树状结构展示需求
       └──────┬───────┘
              │
              ├──▶ 人工编辑确认
              │
              └──▶ 关联测试用例
                     │
                     ▼
              ┌──────────────┐
              │ 需求覆盖率统计│
              └──────────────┘
```

---

### 3.4 AI 生成测试用例流程

```
┌─────────────────────────────────────────────────────────────┐
│                      AI 生成用例流程                         │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  输入层                                                      │
│  ├── 需求文档（完整文本）                                    │
│  ├── 用户故事（As a...I want...So that...）                  │
│  └── 功能描述（简短描述）                                    │
│                          │                                   │
│                          ▼                                   │
│  分析层（AI Agent - 参考 Coze/Dify）                         │
│  ┌─────────────────────────────────────────────┐             │
│  │ 1. 意图识别：理解需求类型                    │             │
│  │ 2. 场景提取：识别功能场景                    │             │
│  │ 3. 边界分析：识别边界条件                    │             │
│  │ 4. 风险评估：识别风险点                      │             │
│  └─────────────────────────────────────────────┘             │
│                          │                                   │
│                          ▼                                   │
│  生成层                                                      │
│  ┌─────────────────────────────────────────────┐             │
│  │ • 正向用例（正常操作流程）                   │             │
│  │ • 反向用例（异常/错误处理）                  │             │
│  │ • 边界用例（极限值测试）                     │             │
│  │ • 探索建议（需要人工确认的测试点）           │             │
│  └─────────────────────────────────────────────┘             │
│                          │                                   │
│                          ▼                                   │
│  输出层                                                      │
│  ├── 用例标题                                                │
│  ├── 前置条件                                                │
│  ├── 测试步骤（1、2、3...）                                  │
│  ├── 预期结果                                                │
│  ├── 优先级（P0/P1/P2）                                      │
│  └── 标签（功能/性能/安全...）                               │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**用户操作流程**：

```
选择需求/输入描述
       │
       ▼
点击「AI 生成用例」
       │
       ▼
┌──────────────┐
│  生成中...   │ ◀── 显示进度动画（预计 5-10s）
└──────┬───────┘
       │
       ▼
┌──────────────┐
│  生成完成    │ ◀── 展示生成的用例列表
└──────┬───────┘
       │
       ├──▶ 全选导入
       │
       ├──▶ 部分选择导入
       │
       └──▶ 编辑后再导入
              │
              ▼
       ┌──────────────┐
       │  用例库      │
       └──────────────┘
```

---

### 3.5 自动化测试执行流程

```
选择用例/用例集
       │
       ▼
点击「执行测试」
       │
       ▼
┌──────────────────┐
│  执行配置弹窗    │
│  • 执行环境      │
│  • 浏览器类型    │
│  • 并发数        │
│  • 重试次数      │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│  任务队列        │ ──▶ BullMQ 调度
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│  Playwright 执行 │ ──▶ 云端/本地浏览器
└────────┬─────────┘
         │
         ├──▶ 执行中 ──▶ 实时推送进度（WebSocket）
         │
         ├──▶ 步骤成功 ──▶ 标记通过，继续下一步
         │
         └──▶ 步骤失败 ──▶ 截图/录屏/日志，标记失败
              │
              ▼
       ┌──────────────┐
       │  生成结果    │
       │  • 通过/失败 │
       │  • 耗时统计  │
       │  • 截图证据  │
       │  • 日志详情  │
       └──────┬───────┘
              │
              ▼
       ┌──────────────┐
       │  失败分析    │
       │  • AI 分析原因│
       │  • 推荐修复  │
       │  • 生成 Bug  │
       └──────┬───────┘
              │
              ▼
       ┌──────────────┐
       │  测试报告    │
       └──────────────┘
```

---

### 3.6 定时任务流程

```
┌──────────────┐
│ 创建定时任务 │
└──────┬───────┘
       │
       ▼
┌──────────────────┐
│  任务配置        │
│  • 选择用例集    │
│  • 设置 Cron     │ ──▶ 提供可视化选择器
│  • 选择环境      │
│  • 通知设置      │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│  保存任务        │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│  定时调度器      │ ──▶ node-cron / Bull Repeat
│  监控 Cron 表达式 │
└────────┬─────────┘
         │
         ├──▶ 到达触发时间 ──▶ 创建执行任务
         │
         └──▶ 执行完成 ──▶ 发送通知
                              │
                              ▼
                    ┌──────────────────┐
                    │  通知渠道        │
                    │  • 邮件          │
                    │  • 钉钉 Webhook  │
                    │  • 企业微信      │
                    │  • 站内消息      │
                    └──────────────────┘
```

**Cron 可视化选择器**：
```
┌────────────────────────────────────────────────┐
│  执行时间设置                                   │
├────────────────────────────────────────────────┤
│                                                │
│  频率: [每天 ▼] [ 8 ] 点 [ 0 ] 分             │
│                                                │
│  或 Cron: 0 0 8 * * *                          │
│                                                │
│  下次执行: 2026-02-17 08:00:00                 │
│                                                │
└────────────────────────────────────────────────┘
```

---

### 3.7 CI/CD 集成流程

```
CI/CD 流水线
    │
    ├──▶ 构建完成
    │
    ├──▶ 部署完成
    │       │
    │       ▼
    │  ┌──────────────┐
    └──▶│ Webhook    │ ──▶ POST https://aitest.com/api/webhook
        │ 触发测试   │      Header: X-API-Key: xxx
        └──────┬──────┘      Body: { projectId, branch, commit }
               │
               ▼
        ┌──────────────┐
        │ 验证请求     │
        │ 创建执行任务 │
        └──────┬───────┘
               │
               ▼
        ┌──────────────┐
        │ 异步执行测试 │
        └──────┬───────┘
               │
               ├──▶ 执行中 ──▶ 回调 CI: pending
               │
               ├──▶ 执行成功 ──▶ 回调 CI: success
               │
               └──▶ 执行失败 ──▶ 回调 CI: failure
                        │
                        ▼
                 ┌──────────────┐
                 │ 质量门禁判断 │
                 │ 通过? 继续部署 │
                 │ 失败? 阻断发布 │
                 └──────────────┘
```

---

## 4. 页面层级结构

```
/
├── /login                    # 登录页
├── /register                 # 注册页
├── /forgot-password          # 找回密码
│
├── /dashboard                # 工作台首页
│   ├── /workspaces           # 工作空间列表
│   │   └── /[id]             # 工作空间详情
│   │       ├── /projects     # 项目列表
│   │       │   └── /[id]     # 项目详情
│   │       │       ├── /systems    # 系统列表
│   │       │       │   └── /[id]   # 系统详情
│   │       │       │       ├── /pages    # 页面列表
│   │       │       │       │   └── /[id] # 页面详情
│   │       │       │       │       ├── /requirements  # 需求管理
│   │       │       │       │       ├── /testcases     # 用例管理
│   │       │       │       │       └── /executions    # 执行记录
│   │       │       │       ├── /settings     # 系统设置
│   │       │       └── /settings             # 项目设置
│   │       └── /settings                     # 工作空间设置
│   │
│   ├── /testcases            # 我的用例（跨项目）
│   ├── /executions           # 执行历史
│   └── /reports              # 报告中心
│
├── /ai-assistant             # AI 助手
├── /scheduled-tasks          # 定时任务
├── /bug-management           # Bug 管理
├── /settings                 # 个人设置
│   ├── /profile              # 个人资料
│   ├── /security             # 安全设置
│   └── /notifications        # 通知设置
│
└── /help                     # 帮助中心
```

---

## 5. 关键交互设计

### 5.1 全局导航

```
┌─────────────────────────────────────────────────────────────────┐
│ 🧪 AI Test Platform    工作台    用例库    执行历史    报告中心  │
│                                    [🔔]  [👤 用户名 ▼] [⚙️]    │
└─────────────────────────────────────────────────────────────────┘
```

### 5.2 面包屑导航

```
工作台 / 我的工作空间 / 电商项目 / 订单系统 / 页面管理 / 订单列表页
```

### 5.3 列表操作

```
┌─────────────────────────────────────────────────────────────────┐
│ [批量操作 ▼]              [搜索...]     [筛选 ▼]  [+ 新建]      │
├─────────────────────────────────────────────────────────────────┤
│ ☐ │ 名称        │ 状态  │ 更新时间    │ 操作                  │
├───┼─────────────┼───────┼─────────────┼───────────────────────┤
│ ☐ │ 订单列表页  │ 启用  │ 2 小时前    │ [编辑] [删除] [执行]  │
│ ☐ │ 商品详情页  │ 启用  │ 1 天前      │ [编辑] [删除] [执行]  │
│ ☐ │ 购物车页    │ 草稿  │ 3 天前      │ [编辑] [删除] [执行]  │
└─────────────────────────────────────────────────────────────────┘
```

### 5.4 AI 交互提示

```
┌─────────────────────────────────────────────────────────────────┐
│ 🤖 AI 助手正在为您生成测试用例...                                │
│ ████████████░░░░░░░░  60%                                       │
│ 预计剩余时间: 3 秒                                               │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 错误处理流程

### 6.1 全局错误

| 错误类型 | 用户提示 | 处理方式 |
|----------|----------|----------|
| 网络断开 | "网络连接异常，请检查网络后重试" | 自动重试 3 次 |
| 服务器错误 | "服务器繁忙，请稍后重试" | 提示刷新页面 |
| 权限不足 | "您没有权限执行此操作" | 引导申请权限 |
| 会话过期 | "登录已过期，请重新登录" | 跳转登录页 |

### 6.2 业务错误

| 场景 | 错误提示 | 解决方案 |
|------|----------|----------|
| AI 生成失败 | "AI 服务暂时不可用，请稍后重试" | 提供手动创建入口 |
| 测试执行超时 | "测试执行超时，请检查被测系统" | 显示日志帮助排查 |
| 文件上传失败 | "文件过大/格式不支持" | 提示支持的格式和大小限制 |

---

## 7. 移动端适配

### 7.1 响应式断点

| 设备 | 断点 | 布局调整 |
|------|------|----------|
| 手机 | < 640px | 单列布局，抽屉导航 |
| 平板 | 640px - 1024px | 双列布局 |
| 桌面 | > 1024px | 完整多列布局 |

### 7.2 移动端核心功能

- ✅ 查看测试报告
- ✅ 接收执行通知
- ✅ 简单的用例浏览
- ⚠️ AI 生成用例（简化版）
- ❌ 复杂的测试执行配置（引导到 PC 端）

---

**文档版本**: v1.0  
**最后更新**: 2026-02-16  
**维护人**: AI 产品经理
