---
name: refactor-code
description: ä»£ç é‡æ„å·¥ä½œæµ - å®¡æŸ¥â†’è§„åˆ’â†’å®‰å…¨é‡æ„â†’éªŒè¯
---

# Code Refactor Skill

ä¸€é”®æ‰§è¡Œå®‰å…¨çš„ä»£ç é‡æ„æµç¨‹ï¼ŒåŒ…å«ä¾èµ–åˆ†æã€åˆ†æ‰¹ä¿®æ”¹ã€å›æ»šä¿æŠ¤ã€‚

## è§¦å‘æ–¹å¼

```bash
/skill:refactor-code
```

æˆ–å…³é”®è¯ï¼š
- "é‡æ„ä»£ç "
- "ä¼˜åŒ–ä»£ç "
- "é‡æ„è¿™ä¸ªæ¨¡å—"
- "ä»£ç é‡æ„"

## æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: cost-control                                       â”‚
â”‚  â””â”€ å»ºç«‹é‡æ„æˆæœ¬åŸºçº¿                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 2: code-review                                        â”‚
â”‚  â”œâ”€ åˆ†æç›®æ ‡æ¨¡å—                                             â”‚
â”‚  â”œâ”€ è¾“å‡º ASCII æ¶æ„å›¾                                        â”‚
â”‚  â”œâ”€ è¯†åˆ«ä»£ç åå‘³é“                                           â”‚
â”‚  â””â”€ è¾“å‡ºé—®é¢˜æ¸…å•                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 3: task-planner                                       â”‚
â”‚  â”œâ”€ åˆ¶å®šé‡æ„è®¡åˆ’                                             â”‚
â”‚  â”œâ”€ ä¾èµ–åˆ†æï¼ˆåº•å±‚â†’ä¸Šå±‚ï¼‰                                    â”‚
â”‚  â”œâ”€ åˆ†æ‰¹ç­–ç•¥ï¼ˆæ¯æ‰¹â‰¤3æ–‡ä»¶ï¼‰                                   â”‚
â”‚  â”œâ”€ ä¿å­˜åˆ° refactor-plan.md                                 â”‚
â”‚  â””â”€ ç­‰å¾…ç”¨æˆ·ç¡®è®¤                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 4: code-refactor                                      â”‚
â”‚  â”œâ”€ æŒ‰æ‰¹æ¬¡æ‰§è¡Œé‡æ„                                           â”‚
â”‚  â”œâ”€ æ¯æ‰¹å±•ç¤º diff                                            â”‚
â”‚  â”œâ”€ ä¿æŒå‡½æ•°ç­¾åå…¼å®¹                                         â”‚
â”‚  â””â”€ æ¯æ‰¹åè¯¢é—®ç¡®è®¤                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 5: code-review                                        â”‚
â”‚  â””â”€ éªŒè¯é‡æ„è´¨é‡                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 6: debug-diagnosis                                    â”‚
â”‚  â””â”€ è‡ªè¯é‡æ„æœªå¼•å…¥ bug                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 7: doc-system                                         â”‚
â”‚  â”œâ”€ æ›´æ–° progress.txt                                       â”‚
â”‚  â””â”€ è®°å½•æŠ€æœ¯å€ºåŠ¡æ¸…ç†                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 8: git-commit                                         â”‚
â”‚  â””â”€ ç”Ÿæˆ refactor ç±»å‹ commit                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Step 9: cost-control (æ€»ç»“)                                â”‚
â”‚  â””â”€ é‡æ„æˆæœ¬å¯¹æ¯”                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å®‰å…¨åŸåˆ™

- ä¿æŒå‡½æ•°ç­¾åå‘åå…¼å®¹
- æ¯æ¬¡æœ€å¤šé‡æ„ 3 ä¸ªç´§å¯†å…³è”çš„æ–‡ä»¶
- ä¿®æ”¹å‰è¾“å‡º diff å¯¹æ¯”
- å»ºè®®å…ˆ `git add .` å†åº”ç”¨ä¿®æ”¹

## ä½¿ç”¨ç¤ºä¾‹

```
ç”¨æˆ·: /skill:refactor-code

AI: [æ‰§è¡Œ cost-control â†’ code-review]
    ğŸ“Š åŸºçº¿: $0.023
    
    [code-review] åˆ†ææ¨¡å—...
    ğŸ” å‘ç°ä»¥ä¸‹é—®é¢˜:
    1. utils.ts å‡½æ•°è¿‡é•¿ (>50è¡Œ)
    2. api.ts é‡å¤ä»£ç 
    3. ç¼ºå°‘é”™è¯¯å¤„ç†
    
    ASCIIæ¶æ„å›¾:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  API    â”‚â”€â”€â”€â”€â–¶â”‚  Utils  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AI: [æ‰§è¡Œ task-planner]
    ğŸ“‹ é‡æ„è®¡åˆ’ (refactor-plan.md)
    æ‰¹æ¬¡1: æå– validate å‡½æ•°
    æ‰¹æ¬¡2: åˆå¹¶é‡å¤ API é€»è¾‘
    æ‰¹æ¬¡3: æ·»åŠ é”™è¯¯å¤„ç†
    
    ç¡®è®¤æ‰§è¡Œ? [Y/N]

ç”¨æˆ·: Y
AI: [æ‰§è¡Œ code-refactor]
    æ‰¹æ¬¡1/3: æå– validate å‡½æ•°
    [æ˜¾ç¤º diff]
    ç¡®è®¤åº”ç”¨? [Y/N]
    
    ...
    
    [æ‰§è¡Œ code-review â†’ git-commit â†’ /cost]
    âœ… é‡æ„å®Œæˆ
    ğŸ“Š é‡æ„æˆæœ¬: $0.067
```
