---
name: doc-organize
description: 大文档整理工作流 - 分段处理→逐块分析→整合输出
---

# Document Organize Skill

一键处理大型文档，完成分段、逐块处理、整合输出的完整流程。

## 触发方式

```bash
/skill:doc-organize
```

或关键词：
- "整理文档"
- "处理文档"
- "文档太大"
- "大文档"

## 执行流程

```
┌─────────────────────────────────────────────────────────────┐
│  Step 1: cost-control                                       │
│  ├─ 显示文档读取预估消耗                                     │
│  └─ 超过阈值时询问确认                                       │
├─────────────────────────────────────────────────────────────┤
│  Step 2: doc-processor                                      │
│  ├─ 结构分析（输出文档地图）                                 │
│  ├─ 分块方案（每块5k-8k字符）                                │
│  └─ 等待用户发送第1块                                        │
├─────────────────────────────────────────────────────────────┤
│  Step 3: 逐块处理 (循环)                                     │
│  ├─ 块1: 用户发送内容                                        │
│  ├─ 显示"处理块 1/N，预估消耗: $x"                          │
│  ├─ 处理并输出 block-1-summary.md                           │
│  ├─ 说"/next"继续下一块                                      │
│  └─ ...                                                      │
├─────────────────────────────────────────────────────────────┤
│  Step 4: 累积检查                                            │
│  └─ 单轮 > $0.05 时强制询问 "是否继续? [Y/N]"               │
├─────────────────────────────────────────────────────────────┤
│  Step 5: doc-processor (整合)                               │
│  ├─ 整合所有块摘要                                           │
│  ├─ 去重处理                                                 │
│  └─ 输出 final-document.md                                  │
├─────────────────────────────────────────────────────────────┤
│  Step 6: cost-control (总结)                                │
│  └─ 文档处理总消耗                                           │
└─────────────────────────────────────────────────────────────┘
```

## 分块方案示例

```
文档地图: 技术规范文档 (45,000字符)

块1: 概述与架构 (6,200字符)
块2: 数据模型 (5,800字符)
块3: API规范 (7,100字符)
块4: 前端组件 (6,500字符)
块5: 部署配置 (4,200字符)

分5块处理，预计总消耗: $0.12
```

## 使用示例

```
用户: [引用大文档] /skill:doc-organize

AI: [执行 cost-control]
    📊 检测到文档: 45,000字符
    💰 预估消耗: $0.12 (约 15,000 tokens)
    是否继续? [Y/N]

用户: Y
AI: [执行 doc-processor]
    📑 文档地图:
    块1: 概述与架构
    块2: 数据模型
    块3: API规范
    块4: 前端组件
    块5: 部署配置
    
    请发送第1块内容

用户: [发送块1]
AI: [处理块1]
    处理块 1/5，预估消耗: $0.025
    ✅ 已输出 block-1-summary.md
    
    说"/next"继续，或发送块2

用户: /next
AI: [处理块2...]
    ...

AI: [全部完成，执行整合]
    📄 已整合输出 final-document.md
    📊 总消耗: $0.098
```

## 快捷指令

| 指令 | 作用 |
|-----|------|
| `/next` | 继续下一块 |
| "跳过" | 跳过当前块 |
| "整合" | 提前进入整合阶段 |
